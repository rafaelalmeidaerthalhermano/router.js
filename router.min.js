/**
* Copyright (C) 2013 Rafael Almeida Erthal Hermano
*
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
*
* This program is distributed in the hope that it will be useful, but
* WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
* General Public License for more details.
*
* You should have received a copy of the GNU General Public License
* along with this program. If not, see http://www.gnu.org/licenses/.
*/
var Router=new Class(function(e){if(!e||e.constructor!==Function){throw"Callback must be a function"}var t=[],n,r,i=this;n=function(e,t){if(!e||e.constructor!==String){throw"Mask must be a string"}if(!t||t.constructor!==String){throw"Url must be a string"}var n=e.split("/"),r=t.split("/"),i;if(n.length!==r.length){return false}for(i=0;i<n.length;i=i+1){if(n[i]!==r[i]&&n[i]!=="*"&&n[i].substring(0,1)!==":"){return false}}return true};r=function(e,t){e.callback.apply(new Router.Context(e.url,t))};this.track=function(e,i){if(!e||e.constructor!==String){throw"Url must be a string"}if(!i||i.constructor!==Function){throw"Callback must be a function"}t.push({url:e,callback:i});if(n(e,document.location.pathname)){r({url:e,callback:i},document.location.pathname)}};document.addEventListener("click",function(e){var i=e&&e.target&&e.target.getAttribute?e.target.getAttribute("href"):null,s;if(i){for(s in t){if(n(t[s].url,i)){e.preventDefault();r(t[s],i);if(history&&history.pushState){history.pushState(null,document.title,i)}}}}});e.apply(this)});Router.Context=new Class(function(e,t){this.mask=function(){return e};this.url=function(){return t}})
