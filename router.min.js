var Router=new Class(function(e){if(!e||e.constructor!==Function){throw"Callback must be a function"}var t=[],n,r,i=this;n=function(e,t){if(!e||e.constructor!==String){throw"Mask must be a string"}if(!t||t.constructor!==String){throw"Url must be a string"}var n=e.split("/"),r=t.split("/"),i;if(n.length!==r.length){return false}for(i=0;i<n.length;i=i+1){if(n[i]!==r[i]&&n[i]!=="*"&&n[i].substring(0,1)!==":"){return false}}return true};r=function(e,t){e.callback.apply(new i.Context(e.url,t))};this.Context=new Class(function(e,t){this.mask=function(){return e};this.url=function(){return t}});this.track=function(e,i){if(!e||e.constructor!==String){throw"Url must be a string"}if(!i||i.constructor!==Function){throw"Callback must be a function"}t.push({url:e,callback:i});if(n(e,document.location.pathname)){r({url:e,callback:i},document.location.pathname)}};document.addEventListener("click",function(e){var i=e&&e.target&&e.target.getAttribute?e.target.getAttribute("href"):null,s;if(i){for(s in t){if(n(t[s].url,i)){e.preventDefault();r(t[s],i);if(history&&history.pushState){history.pushState(null,document.title,i)}}}}});e.apply(this)})
